function getJson(a){document.querySelector(".bg-private_message").innerHTML="";const e=`/private/chat/json/${a}`;$.ajax({type:"GET",url:e,success:function(a){const s=a.data;$(".private_msg_form").attr("action",`${e}/`),a.load_more.load_more&&(document.querySelector(".bg-private_message").innerHTML='<div class="comment">\n                                                                                    <div class="ui fluid button get_another_number">Открыть сообшения</div>\n                                                                                    </div>'),s.map(a=>{el=`<div class="comment private_message_custom ${a.sender}">\n                                    <a class="avatar">\n                                        <img class="ui avatar image" src="${a.user_avatar}">\n                                    </a>\n                                    <div class="content">\n                                        <a class="author">${a.user_name}</a>\n                                        <div class="metadata">\n                                            <span class="date">${a.timestamp}</span>\n                                        </div>\n                                        <div class="text">\n                                            ${a.message}\n                                        </div>\n                                    </div>\n                                </div>`,document.querySelector(".bg-private_message").innerHTML+=el}),$(".overflow-a").scrollTop($(".overflow-a").prop("scrollHeight"))},error:function(a){}})}var global_val_for_visibility_msg=10;$(document).ready(function(){$(".mini.ui.positive.basic.button.w-big").click(a=>{$(".ui.tiny.modal.personal_message").modal({onHide:function(){global_val_for_visibility_msgval=10,window.location.reload()}}).modal("show");var e=$(a.target).attr("datatype");getJson(e)})}),$(".private_msg_form").submit(function(a){a.preventDefault();var e=$(".private_message_text").val();const s=$(".private_msg_form").attr("action");$.ajax({type:"POST",url:s,data:{csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val(),message:e},success:function(a){const e=a.data;e.map(a=>{last_msg=`<div class="comment ${a.sender}">\n                                <a class="avatar">\n                                    <img class="ui avatar image" src="${a.user_avatar}">\n                                </a>\n                                <div class="content">\n                                    <a class="author">${a.user_name}</a>\n                                    <div class="metadata">\n                                        <span class="date">${a.timestamp}</span>\n                                    </div>\n                                    <div class="text">\n                                        ${a.message}\n                                    </div>\n                                </div>\n                            </div>`,document.querySelector(".bg-private_message").innerHTML+=last_msg}),$(".private_message_text").val(""),$(".overflow-a").scrollTop($(".overflow-a").prop("scrollHeight")),$(".private_message_text").focus()},error:function(a){console.log("error",a)}})}),$(".overflow-a").click(a=>{if($(a.target).hasClass("get_another_number")){$(".get_another_number").remove(),global_val_for_visibility_msg+=10;const a=$(".private_msg_form").attr("action");$.ajax({type:"GET",url:a+global_val_for_visibility_msg+"/",success:function(a){const e=a.new_data;$(".comment").first().before('<div class="ui active centered inline black loader"></div>'),setTimeout(function(){$(".ui.active.centered.inline.loader").remove(),e.map(a=>{load_msg=`<div class="comment ${a.sender}">\n                                                <a class="avatar">\n                                                    <img class="ui avatar image" src="${a.user_avatar}">\n                                                </a>\n                                                <div class="content">\n                                                    <a class="author">${a.user_name}</a>\n                                                    <div class="metadata">\n                                                        <span class="date">${a.timestamp}</span>\n                                                    </div>\n                                                    <div class="text">\n                                                        ${a.message}\n                                                    </div>\n                                                </div>\n                                            </div>`,$(".comment").first().before(load_msg)}),a.load_more.load_more&&$(".comment").first().before('<div class="comment">\n                                                                <div class="ui fluid button get_another_number">Открыть сообшения</div>\n                                                            </div>')},1e3)},error:function(a){console.log("error",a)}})}});