"use strict";async function navbarHide(){window.onscroll=function(){var e=window.pageYOffset;prevScrollpos>e?navbar.classList.remove("top_show"):0==e?navbar.classList.remove("top_show"):prevScrollpos+5<e&&($(".ui.dropdown").dropdown("hide"),navbar.classList.add("top_show")),prevScrollpos=e}}function closeSearch(e){$(e).parent().remove(),$(".first_nav_block").children().each(e=>{$($(".first_nav_block").children()[e]).removeClass("d_none")}),$(".search_form_ushefa_icon").addClass("display"),$(".search_form_ushefa").addClass("display")}function masonryGrid(){$(".grid_ushefa").masonry({fitHeight:!0,fitWidth:!0,gutter:10,columnWidth:250,itemSelector:".grid-item_ushefa"})}function imageLazyLoad(){function e(){document.querySelectorAll("img[data-src]").length>0&&(a(),masonryGrid())}function a(){let e=n.findIndex(e=>pageYOffset>e-s);e>=0&&(t[e].dataset.src&&t[e].complete&&(t[e].src=t[e].dataset.src,t[e].parentElement.classList.remove("padding"),t[e].classList.add("width"),t[e].removeAttribute("data-src"),t[e].classList.remove("d_none"),t[e].parentElement.classList.remove("loading_gif")),delete n[e])}const t=document.querySelectorAll("img[data-src]"),s=document.documentElement.clientHeight;let n=[];t.length>0&&t.forEach(e=>{e.dataset.src&&(n.push(e.getBoundingClientRect().top+pageYOffset),a())}),window.addEventListener("scroll",e)}var prevScrollpos=window.pageYOffset,navbar=document.querySelector("#navbar");if(document.querySelector(".bread").style.marginTop=navbar.offsetHeight+3+"px",navbarHide(),$(document).ready(async function(){$(".add_post_box_custom").attr("style","top: 50px !important;"),$(".ui.dropdown.user_post").dropdown(),$(".ui.dropdown").dropdown(),$(".ui.accordion").accordion(),$(".popup_category").popup(),$(".subscribe_button").click(async function(e){e.preventDefault();try{var a=$(".form__input").val();const e=$("#subscribe_form").attr("action");let t=$("input[name=csrfmiddlewaretoken]").val();await $.ajax({type:"POST",url:e,data:{email:a,csrfmiddlewaretoken:t},dataType:"json",success:function(e){e.status?(document.contains(document.querySelector(".ui.positive.message"))&&document.querySelector(".ui.positive.message").remove(),$(".footer-subsrcibe").before('\n                            <div class="ui positive message">\n                            <i class="close icon"></i>\n                            <div class="header">\n                            Вы успешно добавили свой имаил на рассылку\n                            </div>\n                            <p>Спасибо за подписку</p>\n                            </div>'),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")})):(document.contains(document.querySelector(".ui.warning.message"))&&document.querySelector(".ui.warning.message").remove(),$(".footer-subsrcibe").before('\n                            <div class="ui warning message">\n                            <i class="close icon"></i>\n                            <div class="header">\n                            Данный имаил уже находится в списке рассылок\n                            </div>\n                            <p>Спасибо за подписку.</p>\n                            </div>'),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")}))},error:function(e,a){console.log("error_log",e.responseText)}})}catch(e){console.error(e)}}),$(".custom_chat_icon").hover(e=>{$(e.target).removeClass("grey"),$(e.target).addClass("yellow")},e=>{$(e.target).removeClass("yellow"),$(e.target).addClass("grey")}),$(window).width()<=768&&($(".add_dropdown_box_button_ushefa").removeClass("labeled"),$(".add_more_text_ushefa").remove(),$(".add_dropdown_icon_ushefa").addClass("big")),$(window).resize(()=>{$(window).width()<=768?($(".add_dropdown_box_button_ushefa").removeClass("labeled"),$(".add_more_text_ushefa").remove(),$(".add_dropdown_icon_ushefa").addClass("big")):$(window).width()>768&&0==document.contains(document.querySelector(".add_more_text_ushefa"))&&($(".add_dropdown_box_button_ushefa").addClass("labeled"),$(".add_dropdown_icon_ushefa").removeClass("big"),$(".add_dropdown_box_button_ushefa").append('<span class="text add_more_text_ushefa">Добавить</span>'))}),$(".search_form_ushefa_icon").click(()=>{$(".search_form_ushefa_icon").removeClass("display"),$(".search_form_ushefa").removeClass("display"),$(".first_nav_block").children().each(e=>{$($(".first_nav_block").children()[e]).addClass("d_none")});var e='<div class="item search_item_form width_100">\n        <form action="/dishes/by_search_title/" class="mr-10 search_form_ushefa width_100" method="get" >\n            <div class="ui fluid action input">\n                <input class=" font-oswald" type="search" placeholder="Введите слово" aria-label="Search" name="q">\n                <button class="ui basic yellow button" type="submit">\n                    <i class="search link icon"></i>\n                </button>\n            </div>\n        </form><i class="close big white icon " onclick="closeSearch(this)"></i></div>';$(".first_nav_block").append(e)}),$(".big.white.bars.icon").click(()=>{$(".ui.basic.modal.ushefa_modal").modal("show")}),$(".centered_custom").click(e=>{$(e.target).children(".dropdown").click()})}),imageLazyLoad(),document.contains(document.querySelector("form[name=dish_filter_ajax]"))){async function sendAjaxToFilterDishe(e,a){await fetch(`${e}?${a}`,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlcoded"}}).then(e=>e.json()).then(e=>renderFilterResult(e)).catch(e=>console.error(e))}async function sendAjaxToPagination(e,a,t){await fetch(`${e}${a}?${t}`,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlcoded"}}).then(e=>e.json()).then(e=>renderFilterResult(e)).catch(e=>console.error(e))}const e=document.querySelector("form[name=dish_filter_ajax]");function renderFilterResult(a){let t=$(".grid_ushefa");t.html("");for(var s=0;s<a.meals.length;s++){let e=a.meals[s];t.append(`\n                <div class="grid-item_ushefa">\n                    <a href="/detail/${e.slug}/${e.id}" class="ui fluid card">\n                        <div class="page_image loading_gif">\n                            <img class="filtered_dishes_img" src="/static/image/2.png" data-src="/media/${e.poster}" alt="${e.title}">\n                        </div>\n                        <div class="content">\n                            <div class="header grey">\n                            ${e.title}\n                            </div>\n                        </div>\n                        <div class="extra content">\n                            <span class="left floated">\n                                <i class="comment icon"></i>\n                                ${e.total_comments}\n                                <i class="eye icon"></i>\n                                ${e.total_hits}\n                                <i class="ui thumbs up icon"></i>\n                                ${e.likes}\n                            </span>\n                        </div>\n                    </a>\n                </div>`)}t.masonry("reloadItems"),imageLazyLoad(),setTimeout(()=>{$(".custom_dimmer_loader").remove()},1e3);let n=$(".pagination_try");if(n.html(""),a.page_num>1&&n.append(`<a href="${a.page_num-1}" class="icon item pagination_item chevron"><i class="left chevron icon"></i></a>`),a.page_num-3>=1&&$(".pagination_item.chevron").after(`<a href="${a.page_num-3}" class="item pagination_item">...</a>`),a.page_range.length>1){for(s=0;s<a.page_range.length;s++)a.page_range[s]==a.page_num?n.append(`<span class="active item">${a.page_range[s]}</span>`):a.page_num+3==a.page_range[s]?n.append(`<a href="${a.page_range[s]}" class="item pagination_item">...</a>`):a.page_range[s]<a.page_num+3&&a.page_range[s]>a.page_num-3&&n.append(`<a href="${a.page_range[s]}" class="item pagination_item">${a.page_range[s]}</a>`);a.page_num<a.page_range.length&&n.append(`<a href="${a.page_range[a.page_num]}" class="icon item pagination_item"><i class="right chevron icon"></i></a>`)}$(".ushefa_according_title").html(`Найдено рецептов по вашему запросу - ${a.meal_counts}`),$(".pagination_item").click(a=>{a.preventDefault();let t=new URLSearchParams(new FormData(e)).toString(),s=$(a.target).attr("href");sendAjaxToPagination(e.action,s,t)})}$(".all_filter_click").on("click",function(a){let t=e.action,s=new URLSearchParams(new FormData(e)).toString(),n='<div class="ui active inverted dimmer custom_dimmer_loader">\n                        <div class="ui large text loader">Loading</div>\n                    </div>';$(".content_side_yummy").append(n),sendAjaxToFilterDishe(t,s)}),$(".all_filter_click").next().on("click",function(a){"checked"==$(a.target).prev().attr("checked")?($(a.target).prev().attr({checked:!1}),$(a.target).removeClass("checked")):($(a.target).prev().attr({checked:!0}),$(a.target).addClass("checked"));let t=e.action,s=new URLSearchParams(new FormData(e)).toString(),n='<div class="ui active inverted dimmer custom_dimmer_loader">\n                        <div class="ui large text loader">Loading</div>\n                    </div>';$(".content_side_yummy").append(n),sendAjaxToFilterDishe(t,s)}),$(".search_title_ajax").on("click",function(a){a.preventDefault();let t=e.action,s=new URLSearchParams(new FormData(e)).toString();sendAjaxToFilterDishe(t,s)})}$(document).ready(()=>{function e(e){let a=e;for(let e=0;e<$(`.${a}`).length;e++)$(`.${a}`)[e].classList.contains("d_none")?($(`.${a}`)[e].classList.remove("d_none"),$(`.${a}`)[e].classList.add("visible")):($(`.${a}`)[e].classList.remove("visible"),$(`.${a}`)[e].classList.add("d_none"))}$(".show_more_button").on("click",a=>{e($(a.target).attr("datatype")),$(a.target).children("i").hasClass("plus")?($(a.target).children("i").removeClass("plus"),$(a.target).children("i").addClass("minus")):($(a.target).children("i").removeClass("minus"),$(a.target).children("i").addClass("plus"))}),$(window).width()<770&&($(".show_search_button").addClass("show"),$(".side_bar_search_content").removeClass("four").removeClass("wide").removeClass("column").addClass("sidebar"),$(".filter_element_container").removeClass("stackable").removeClass("grid").removeClass("ui").addClass("pushable"),$(".content_side_yummy").removeClass("twelve").removeClass("wide").removeClass("fluid").removeClass("column").addClass("pusher"),$(".side_bar_search_content").sidebar({context:$(".filter_element_container")}).sidebar("attach events",".show_search_button"))});