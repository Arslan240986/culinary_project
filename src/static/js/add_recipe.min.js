function showSubCategory(){$("#id_category").change(function(t){t.preventDefault(),$("#id_sub_category").children().remove(),$("#id_sub_category").siblings("div .text").html("---------");var e=$("#id_category").val();const i=$(".recipe_box_category").attr("data-href-template");let o=$("input[name=csrfmiddlewaretoken]").val();$.ajax({type:"GET",url:i,data:{category_id:e,csrfmiddlewaretoken:o},dataType:"json",success:function(t){t.length>0?(option='<option value="" selected="True">---------</option>',t.forEach(function(t){option+=`<option value="${t.id}">${t.name}</option>`}),$("#id_sub_category").append(option)):$("#id_sub_category").children().remove()},error:function(t,e){console.log(t.responseText)}})})}function readURL(t){if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){var e=t.target.result,i=document.getElementById("poster_image_id");i.src=e},e.readAsDataURL(t.files[0])}}var __hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var o in e)__hasProp.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};(function(t){var e;t.fn.djangoFormset=function(e){return new t.fn.djangoFormset.Formset(this,e)},e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(Error),t.fn.djangoFormset.Formset=function(){function i(i,o){var n,r,s,a,l;if(this.opts=t.extend({},t.fn.djangoFormset.defaultOptions,o),0===i.length)throw new e("Empty selector.");if(this.template=i.filter("."+this.opts.formTemplateClass),0===this.template.length)throw new e("Can't find template (looking for ."+this.opts.formTemplateClass+")");if(s=this.template.find("input,select,textarea").first().attr("name"),!s)throw new e("Can't figure out form prefix because there's no form element in the form template. Please add one.");if(a=s.indexOf("-__prefix__"),-1===a)throw new e("Can't figure out form prefix from template because it doesn't contain '-__prefix__'.");if(this.prefix=s.substring(0,a),this.totalForms=t("#id_"+this.prefix+"-TOTAL_FORMS"),0===this.totalForms.length)throw new e("Management form field 'TOTAL_FORMS' not found for prefix "+this.prefix+".");this._initTabs(),r=i.not("."+this.opts.formTemplateClass),this.initialForms=r.length,t(this).on(this.opts.on),this.forms=r.map((l=this,function(e,i){var o,n,r;return l.hasTabs&&(r=t.djangoFormset.getTabActivator(i.id),n=new l.opts.tabClass(r.closest(".nav > *"))),o=new l.opts.formClass(t(i),l,e,n),t(l).trigger("formInitialized",[o]),o})),this.forms.length!==parseInt(this.totalForms.val())&&console.error("TOTAL_FORMS is "+this.totalForms.val()+", but "+this.forms.length+" non-template elements found in passed selection."),n=this.forms.filter(function(){return this.deleteInput.val()}),n.each(function(){return this.delete()}),this.insertAnchor=i.not("."+this.opts.formTemplateClass).last(),0===this.insertAnchor.length&&(this.insertAnchor=this.template)}return i.prototype._initTabs=function(){var i,o;if(this.hasTabs=this.template.is(".tab-pane"),this.hasTabs){if(i=t.djangoFormset.getTabActivator(this.template.attr("id")),0===i.length)throw new e("Template is .tab-pane but couldn't find corresponding tab activator.");if(o=i.closest(".nav"),0===o.length)throw new e("Template is .tab-pane but couldn't find corresponding .nav.");if(this.tabTemplate=o.children("."+this.opts.formTemplateClass),0===this.tabTemplate.length)throw new e("Tab nav template not found (looking for ."+this.opts.formTemplateClass+").")}},i.prototype.addForm=function(){var e,i,o,n,r;return this.hasTabs&&(n=this.tabTemplate.clone().removeClass(this.opts.formTemplateClass),o=new this.opts.tabClass(n),r=this.forms.length>0?this.forms[this.forms.length-1].tab.elem:this.tabTemplate,n.insertAfter(r)),i=this.template.clone().removeClass(this.opts.formTemplateClass),e=new this.opts.formClass(i,this,parseInt(this.totalForms.val()),o),i.insertAfter(this.insertAnchor),this.insertAnchor=i,this.forms.push(e),this.totalForms.val(parseInt(this.totalForms.val())+1),this.hasTabs&&o.activate(),t(this).trigger("formInitialized",[e]),t(this).trigger("formAdded",[e]),e},i.prototype.deleteForm=function(t){var e;e=this.forms[t],e.delete()},i.prototype.handleFormRemoved=function(t){var e,i,o,n,r;for(this.totalForms.val(parseInt(this.totalForms.val())-1),this.forms.splice(t,1),r=this.forms,i=o=0,n=r.length;o<n;i=++o)e=r[i],e._updateFormIndex(i);0===this.forms.length?this.insertAnchor=this.template:this.insertAnchor=this.forms[this.forms.length-1].elem},i}(),t.fn.djangoFormset.Form=function(){function e(t,e,i,o){var n;this.elem=t,this.formset=e,this.index=i,this.tab=o,this.elem.data("djangoFormset.Form",this),void 0!==this.index&&this._initFormIndex(this.index),this.deleteInput=this.field("DELETE"),n=this.index<this.formset.initialForms,(this.deleteInput.length>0||!n)&&this._replaceDeleteCheckboxWithButton()}return e.prototype.getDeleteButton=function(){return t("<div> "+this.formset.opts.deleteButtonText+" </div>")},e.prototype.insertDeleteButton=function(){this.deleteInput.length>0?this.deleteInput.after(this.deleteButton):(this.elem.is("TR")?this.elem.children().last():this.elem.is("UL")||this.elem.is("OL")?this.elem.append("li").children().last():this.elem).append(this.deleteButton)},e.prototype.delete=function(){var t,e,i;t=this.index<this.formset.initialForms,0===this.deleteInput.length&&t?console.warn("Tried do delete non-deletable form "+this.formset.prefix+" #"+this.index+"."):(this.tab&&this.tab.elem.is(".active")&&(i=this.formset.forms.map(function(t,e){return e.tab.elem[0]}),e=i.slice(this.index+1).filter(":visible").first(),0===e.length&&(e=i.slice(0,this.index).filter(":visible").last()),e.length>0&&e.data("djangoFormset.tab").activate()),t?(this.deleteInput.length>0&&this.deleteInput.val("on"),this.tab&&this.tab.elem.hide(),this.hide()):(this.tab&&this.tab.elem.remove(),this.elem.remove(),this.formset.handleFormRemoved(this.index)))},e.prototype.hide=function(){return this.elem.hide()},e.prototype.field=function(t){return this.elem.find("[name='"+this.formset.prefix+"-"+this.index+"-"+t+"']")},e.prototype.prev=function(){var t,e,i;for(i=this.formset.forms.slice(0,+(this.index-1)+1||9e9),e=i.length-1;e>=0;e+=-1)if(t=i[e],t.elem.is(":visible"))return t},e.prototype._replaceDeleteCheckboxWithButton=function(){var e,i,o;this.deleteInput.length>0&&(i=t("<input type='hidden' name='"+this.deleteInput.attr("name")+"' id='"+this.deleteInput.attr("id")+"' value='"+(this.deleteInput.is(":checked")?"on":"")+"'/>"),e=this.elem.find("label[for='"+this.deleteInput.attr("id")+"']"),e.has(this.deleteInput).length>0?e.replaceWith(i):(e.remove(),this.deleteInput.replaceWith(i)),this.deleteInput=i),this.deleteButton=this.getDeleteButton(),this.deleteButton.on("click",(o=this,function(t){return o.delete()})),this.insertDeleteButton()},e.prototype._replaceFormIndex=function(e,i){var o,n,r;this.index=i,n=new RegExp(this.formset.prefix+"-"+e),o=this.formset.prefix+"-"+i,r=function(t){var e,i,r,s,a,l,d;r={input:["id","name"],select:["id","name"],textarea:["id","name"],label:["for"],div:["id"],"*":["href","data-target"]},s=t.get(0).tagName,i=[],s.toLowerCase()in r&&(i=r[s.toLowerCase()]),i.push.apply(i,r["*"]),d=[];for(a=0,l=i.length;a<l;a++)e=i[a],t.attr(e)?d.push(t.attr(e,t.attr(e).replace(n,o))):d.push(void 0);return d},r(this.elem),this.elem.find("input, select, textarea, label").each(function(){r(t(this))}),this.tab&&(r(this.tab.elem),this.tab.elem.find("a, button").each(function(){r(t(this))}))},e.prototype._initFormIndex=function(t){this._replaceFormIndex("__prefix__",t)},e.prototype._updateFormIndex=function(t){this._replaceFormIndex("\\d+",t)},e}(),t.fn.djangoFormset.Tab=function(){function t(t){this.elem=t,this.elem.data("djangoFormset.tab",this)}return t.prototype.activate=function(){return this.elem.find("[data-toggle='tab']").trigger("click")},t.prototype.remove=function(){return this.elem.remove()},t}(),t.fn.djangoFormset.defaultOptions={formTemplateClass:"empty-form",formClass:t.fn.djangoFormset.Form,tabClass:t.fn.djangoFormset.Tab,deleteButtonText:"Delete"},t.djangoFormset={getTabActivator:function(e){return t("[href='#"+e+"'], [data-target='#"+e+"']")}}})(jQuery),showSubCategory(),$(document).ready(function(){$(".max.example ui.normal.dropdown").dropdown({maxSelections:3}),$(".my_dropdown").dropdown(),$(".ui.toggle.checkbox").checkbox(),$("#poster_image_id").click(()=>{$("#id_poster").click()}),$("#poster_image_id").mouseover(()=>{$(".form__add-img").css({display:"block"})}),$("#poster_image_id").mouseout(()=>{$(".form__add-img").css({display:"none"})}),$(".instruction_image_div").mouseover(t=>{$(t.target).next().next("div.form__add-img-instr").css({display:"block"})}),$(".instruction_image_div").mouseout(t=>{$(t.target).next().next("div.form__add-img-instr").css({display:"none"})}),$(".instruction_image_div").click(t=>{var e=$(t.target).next(),i=e.children("input[type=file]");i.click(),i.change(t=>{if($(t.target).prop("files")&&$(t.target).prop("files")[0]){previousImage=e.prev();var i=new FileReader;i.onload=function(t){var e=t.target.result;previousImage.attr({src:e})},i.readAsDataURL($(t.target).prop("files")[0])}})})});var outerFormset=$("fieldset.ingredient_form_set").not(".ui.negative.message").djangoFormset({on:{formInitialized:function(t,e){var i=e.elem.children("div.ingredient_block"),o=i.children("div").djangoFormset({deleteButtonText:'<i class="ui big times circle red icon cursor"></i>'});i.on("click","[data-action=add-inner-ingredient-form]",function(t){o.addForm()})}},deleteButtonText:'<i class="ui big times circle red icon cursor"></i>'});$("form").on("click","[data-action=add-outer-ingredient-form]",function(t){outerFormset.addForm()}),$(function(){var t=$("div.inline.instruction_visible").djangoFormset({deleteButtonText:'<i class="ui big times circle red icon cursor"></i>'});$("form").on("click","[data-action=add-form-to-instruction]",function(e){t.addForm(),$(".instruction_image_div").click(t=>{var e=$(t.target).next(),i=e.children("input[type=file]");i.click(),i.change(t=>{if($(t.target).prop("files")&&$(t.target).prop("files")[0]){previousImage=e.prev();var i=new FileReader;i.onload=function(t){var e=t.target.result;previousImage.attr({src:e})},i.readAsDataURL($(t.target).prop("files")[0])}})}),$(".instruction_image_div").mouseover(t=>{$(t.target).next().next("div.form__add-img-instr").css({display:"block"})}),$(".instruction_image_div").mouseout(t=>{$(t.target).next().next("div.form__add-img-instr").css({display:"none"})})})});